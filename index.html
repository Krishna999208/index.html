<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Tech Hub - E-Commerce</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Maps API (replace with your key) -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap"></script>
    <style>
        /* Custom styles if needed */
        .carousel-item { display: none; }
        .carousel-item.active { display: block; }
        .star-rating { color: gold; }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <header class="bg-blue-600 text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">Smart Tech Hub (Purulia)</h1>
            <div>
                <p>Address: Lokoseth Para, Purulia, West Bengal</p>
                <p>Phone: 6299739348 | WhatsApp: <a href="https://wa.me/8167746676" class="underline">8167746676</a></p>
            </div>
            <div>
                <button id="cart-btn" class="bg-green-500 px-4 py-2 rounded">Cart (0)</button>
                <button id="admin-btn" class="bg-red-500 px-4 py-2 rounded ml-2">Admin Panel</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4">
        <!-- Shop Photos Carousel -->
        <section class="mb-8">
            <h2 class="text-xl font-semibold mb-4">Shop Photos</h2>
            <div id="carousel" class="relative">
                <div class="carousel-item active">
                    <img src="https://via.placeholder.com/800x400?text=Shop+Photo+1" alt="Shop Photo 1" class="w-full h-64 object-cover rounded">
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/800x400?text=Shop+Photo+2" alt="Shop Photo 2" class="w-full h-64 object-cover rounded">
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/800x400?text=Shop+Photo+3" alt="Shop Photo 3" class="w-full h-64 object-cover rounded">
                </div>
                <button id="prev-btn" class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-black text-white px-2 py-1">Prev</button>
                <button id="next-btn" class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-black text-white px-2 py-1">Next</button>
            </div>
        </section>

        <!-- Search and Filter -->
        <section class="mb-8">
            <input id="search-input" type="text" placeholder="Search products..." class="border p-2 w-full mb-4">
            <select id="category-filter" class="border p-2">
                <option value="">All Categories</option>
                <option value="electronics">Electronics</option>
                <option value="accessories">Accessories</option>
            </select>
        </section>

        <!-- Product Grid -->
        <section id="products" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <!-- Products will be dynamically added here -->
        </section>

        <!-- Google Maps -->
        <section class="mb-8">
            <h2 class="text-xl font-semibold mb-4">Our Location</h2>
            <div id="map" class="w-full h-64 bg-gray-300 rounded"></div>
            <a href="https://www.google.com/maps/dir/?api=1&destination=Lokoseth+Para,Purulia,West+Bengal" target="_blank" class="bg-blue-500 text-white px-4 py-2 mt-2 inline-block rounded">Get Directions</a>
        </section>

        <!-- Video Call -->
        <section class="mb-8">
            <button onclick="window.open('https://meet.jit.si/SmartTechHub-Order', '_blank')" class="bg-purple-500 text-white px-4 py-2 rounded">Start Video Call to Order</button>
        </section>

        <!-- Cart Modal (hidden by default) -->
        <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center">
            <div class="bg-white p-4 rounded w-96">
                <h2 class="text-xl font-semibold mb-4">Cart</h2>
                <ul id="cart-items"></ul>
                <p id="cart-total" class="font-bold mt-4">Total: $0</p>
                <button id="checkout-btn" class="bg-green-500 text-white px-4 py-2 mt-4 rounded">Checkout</button>
                <button onclick="closeCart()" class="bg-gray-500 text-white px-4 py-2 mt-4 ml-2 rounded">Close</button>
            </div>
        </div>

        <!-- Checkout Modal -->
        <div id="checkout-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center">
            <div class="bg-white p-4 rounded w-96">
                <h2 class="text-xl font-semibold mb-4">Checkout</h2>
                <form id="checkout-form">
                    <label class="block mb-2">Payment Method:</label>
                    <select id="payment-method" class="border p-2 w-full mb-4">
                        <option value="cod">Cash on Delivery</option>
                        <option value="prepaid">Prepaid (Simulated)</option>
                    </select>
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Place Order</button>
                </form>
                <button onclick="closeCheckout()" class="bg-gray-500 text-white px-4 py-2 mt-4 ml-2 rounded">Close</button>
            </div>
        </div>

        <!-- Admin Panel (hidden by default) -->
        <div id="admin-panel" class="hidden">
            <h2 class="text-xl font-semibold mb-4">Admin Dashboard</h2>
            <p>New Orders: <span id="new-orders">0</span></p>
            <p>Pending Complaints: <span id="pending-complaints">0</span></p>
            <p>Total Sales: $<span id="total-sales">0</span></p>
            <h3 class="text-lg font-semibold mt-4">Orders</h3>
            <ul id="admin-orders"></ul>
            <h3 class="text-lg font-semibold mt-4">Complaints</h3>
            <ul id="admin-complaints"></ul>
        </div>
    </main>

    <script>
        // Mock Data
        const products = [
            { id: 1, name: 'Laptop', price: 500, category: 'electronics', image: 'https://via.placeholder.com/200?text=Laptop', rating: 4.5, stock: 10, paymentOptions: ['cod', 'prepaid'] },
            { id: 2, name: 'Mouse', price: 20, category: 'accessories', image: 'https://via.placeholder.com/200?text=Mouse', rating: 4.0, stock: 50, paymentOptions: ['cod'] },
            { id: 3, name: 'Keyboard', price: 30, category: 'accessories', image: 'https://via.placeholder.com/200?text=Keyboard', rating: 4.2, stock: 30, paymentOptions: ['prepaid'] }
        ];

        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let complaints = JSON.parse(localStorage.getItem('complaints')) || [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts(products);
            updateCartCount();
            renderAdminData();
        });

        // Carousel
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-item');
        document.getElementById('next-btn').addEventListener('click', () => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        });
        document.getElementById('prev-btn').addEventListener('click', () => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
        });

        // Search and Filter
        document.getElementById('search-input').addEventListener('input', filterProducts);
        document.getElementById('category-filter').addEventListener('change', filterProducts);

        function filterProducts() {
            const search = document.getElementById('search-input').value.toLowerCase();
            const category = document.getElementById('category-filter').value;
            const filtered = products.filter(p => 
                p.name.toLowerCase().includes(search) && (category === '' || p.category === category)
            );
            renderProducts(filtered);
        }

        // Render Products
        function renderProducts(prods) {
            const container = document.getElementById('products');
            container.innerHTML = '';
            prods.forEach(p => {
                const card = document.createElement('div');
                card.className = 'bg-white p-4 rounded shadow';
                card.innerHTML = `
                    <img src="${p.image}" alt="${p.name}" class="w-full h-32 object-cover mb-2">
                    <h3 class="font-semibold">${p.name}</h3>
                    <p>$${p.price}</p>
                    <p class="star-rating">${'‚≠ê'.repeat(Math.floor(p.rating))}</p>
                    <button onclick="addToCart(${p.id})" class="bg-blue-500 text-white px-2 py-1 mt-2 rounded">Add to Cart</button>
                    <button onclick="buyNow(${p.id})" class="bg-green-500 text-white px-2 py-1 mt-2 ml-2 rounded">Buy Now</button>
                    <div class="mt-2">
                        <input type="number" min="1" max="5" placeholder="Rating" id="rating-${p.id}" class="border p-1 w-16">
                        <textarea placeholder="Review" id="review-${p.id}" class="border p-1 w-full mt-1"></textarea>
                        <button onclick="submitReview(${p.id})" class="bg-yellow-500 text-white px-2 py-1 mt-1 rounded">Submit Review</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Cart Functions
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function updateCartCount() {
            document.getElementById('cart-btn').textContent = `Cart (${cart.length})`;
        }

        document.getElementById('cart-btn').addEventListener('click', () => {
            document.getElementById('cart-modal').classList.remove('hidden');
            renderCart();
        });

        function renderCart() {
            const list = document.getElementById('cart-items');
            list.innerHTML = '';
            let total = 0;
            cart.forEach((item, index) => {
                total += item.price;
                const li = document.createElement('li');
                li.textContent = `${item.name} - $${item.price}`;
                list.appendChild(li);
            });
            document.getElementById('cart-total').textContent = `Total: $${total}`;
        }

        function closeCart() {
            document.getElementById('cart-modal').classList.add('hidden');
        }

        document.getElementById('checkout-btn').addEventListener('click', () => {
            document.getElementById('cart-modal').classList.add('hidden');
            document.getElementById('checkout-modal').classList.remove('hidden');
        });

        function closeCheckout() {
            document.getElementById('checkout-modal').classList.add('hidden');
        }

        document.getElementById('checkout-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const method = document.getElementById('payment-method').value;
            if (method === 'prepaid') {
                alert('Payment Successful (Simulated)');
            } else {
                alert('Order placed for COD');
            }
            const orderId = 'STH-' + Math.random().toString(36).substr(2, 8).toUpperCase();
            orders.push({ id: orderId, items: cart, total: cart.reduce((sum, i) => sum + i.price, 0), status: 'Pending' });
            localStorage.setItem('orders', JSON.stringify(orders));
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            closeCheckout();
            renderAdminData();
        });

        function buyNow(id) {
            addToCart(id);
            document.getElementById('checkout-modal').classList.remove('hidden');
        }

        // Reviews
        function submitReview(id) {
            const rating = document.getElementById(`rating-${id}`).value;
            const review = document.getElementById(`review-${id}`).value;
            alert(`Review submitted: ${rating} stars - ${review}`);
        }

        // Admin Panel
        document.getElementById('admin-btn').addEventListener('click', () => {
            document.getElementById('admin-panel').classList.toggle('hidden');
        });

        function renderAdminData() {
            document.getElementById('new-orders').textContent = orders.filter(o => o.status === 'Pending').length;
            document.getElementById('pending-complaints').textContent = complaints.filter(c => c.status === 'Pending').length;
            document.getElementById('total-sales').textContent = orders.reduce((sum, o) => sum + o.total, 0);

            const orderList = document.getElementById('admin-orders');
            orderList.innerHTML = '';
            orders.forEach(o => {
                const li = document.createElement('li');
                li.textContent = `Order ${o.id}: ${o.items.length} items, $${o.total}, Status: ${o.status}`;
                orderList.appendChild(li);
            });

            const complaintList = document.getElementById('admin-complaints');
            complaintList.innerHTML = '';
            complaints.forEach(c => {
                const li = document.createElement('li');
                li.textContent = `Complaint: ${c.description}, Status: ${c.status}`;
                complaintList.appendChild(li);
            });
        }

        // Google Maps
        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 23.3315, lng: 86.3652 },
                zoom: 15
            });
            new google.maps.Marker({
                position: { lat: 23.3315, lng: 86.3652 },
                map: map
            });
        }
    </script>
</body>
</html>
